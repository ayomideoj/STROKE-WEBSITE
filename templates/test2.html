<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test-form</title>
   <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/test2.css"/>

</head>
<body>

  <div id="header" class="container">
    <h1 id="logo"><a href="index2.html"><strong>STROKE</strong></br>Prediction</a></h1>

  <!-- nav bar -->
   <nav>
    <a href="test2.html">TEST</a>
    <a href="dashboard.html">DASHBOARD</a>
   </nav>

  </div>

   <div class="main-content">


    <div class="test-form">
      <h2>Lets Get Started</h2>
      <p>Kindly answer the questions below as truthfully as possible</p>

      <form action="/submit" method="POST">
        <label for="gender">Gender</label>
        <select id="gender" name="gender">

          <option value= "Female">Female</option>
          <option value= "Male">Male</option>
          <option value="Other">Other</option>

        </select>

        </br>
        <label for="age">Age</label>
        <input type="text" id="age" name="age" required>

      </br>
     <label for="hypertension">Do You Have Hypertension?</label>
            <select id="hypertension" name="hypertension">
                <option value="1">Yes</option>
                <option value="0">No</option>
            </select>

        </br>
        <label for="heart_disease">Do You Have Any Heart Diseases:</label>
            <select id="heart_disease" name="heart_disease">
                <option value="1">Yes</option>
                <option value="0">No</option>
            </select>

          </br>
          <label for="ever_married">Are You Married</label>
          <select id="ever_married" name="ever_married">
            <option value="Yes">Yes</option>
            <option value="No">No</option>
          </select>

          </br>
          <label for="work_type"> What Is Your Work Type</label>
          <select id="work_type" name="work_type">
           <option value="Govt_job">Government Job</option>
            <option value="Never_worked">Never Worked</option>
            <option value="Private">Private</option>
            <option value="Self-employed">Self employed</option>
            <option value="children">Children</option> 
          </select>

          </br>
          <label for="Residence_type">What Is Your Residence Type?:</label>
            <select id="Residence_type" name="Residence_type">
                <option value="Urban">Urban</option>
                <option value="Rural">Rural</option>
            </select>

            </br>
            <label for="avg_glucose_level"> What Is Your Glucose Level</label>
            <input type="text" id="avg_glucose_level" name="avg_glucose_level" required>

            </br>
            <label for="bmi">What Is Your BMI</label>
            <input type="text" id="bmi" name="bmi" required>

            </br>
            <label for="smoking_status">Are You A Smoker:</label>
            <select id="smoking_status" name="smoking_status">
                <option value="formerly smoked">Former smoker</option>
                <option value="never smoked">No</option>
                <option value="smokes">Yes</option>
                <option value="Unknown">Unknown</option>
            </select>


              <div class="button-group">
            <button type="submit">Submit Test</button>
            <button type = "reset" onclick="document.getElementById('dataForm').reset()">Reset</button>
             </div>
      </form>

    </div>


   </div>

   <script>
    document.getElementById("dataForm").addEventListener("submit", async function(event) {
      event.preventDefault(); // prevent normal form submission

      // Collect form data
      const formData = new FormData(this);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      try {
        // Send data to Flask backend
        const response = await fetch("/submit", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        
        // Display response
        document.getElementById("result").innerHTML = 
          `<p><strong>Prediction Result:</strong> ${result.prediction}</p>`;
      } catch (error) {
        console.error("Error:", error);
        document.getElementById("result").innerHTML = 
          `<p style="color:red;">Error submitting form</p>`;
      }
    });
  </script>

</body>

</html>